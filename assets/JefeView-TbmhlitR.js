import{b as x,r as n,I as j,G as u,j as e,S as A}from"./index-ZXlslG1z.js";import{A as E}from"./AdminSearch-DMlT1HSE.js";import{C as v}from"./ConvocatoriaManager-DsSUfls_.js";import C from"./StudentDashboard-_sgKRHhD.js";import{T as I}from"./Tabs-3YiwyxBG.js";import{M,T as D}from"./TimelineView-323S62Er.js";import{S as N}from"./SubTabs-B9w5BDf5.js";import{W as _}from"./WelcomeBannerAdmin-Ds9CiK7J.js";import{A as P}from"./AppModals-D8FkQV9k.js";import"./CollapsibleSection-DXbQB952.js";import"./types-Cg8ilULs.js";import"./Select-DhRNnplj.js";import"./PreSolicitudCheckModal-J-N_Aj9Q.js";import"./ProfileView-CEvSVS12.js";import"./ConvocatoriaCardPremium-Cd-vXGWP.js";import"./proxy-BFxRqQFC.js";import"./differenceInDays-B0Mox2cD.js";import"./UnifiedTabs-xSvmzb6C.js";import"./types-CzNk-woI.js";const Z=()=>{const{authenticatedUser:s}=x(),[r,T]=n.useState([]),l=(s==null?void 0:s.orientaciones)||[],d="metrics",[b,c]=n.useState(d),[m,f]=n.useState("dashboard"),p=n.useCallback(o=>{if(!o)return;const a=o[j],i=o[u];if(!a||!i){alert("El registro del estudiante no tiene legajo o nombre completo.");return}if(r.some(S=>S.legajo===String(a))){c(String(a));return}const t={id:String(a),legajo:String(a),nombre:String(i)};T(S=>[...S,t]),c(String(a))},[r]),g=n.useCallback(o=>{T(a=>a.filter(i=>i.id!==o)),b===o&&c(d)},[b,d]),h=n.useMemo(()=>{const o=[{id:"dashboard",label:"Dashboard",icon:"bar_chart"},{id:"timeline",label:"Línea de Tiempo",icon:"timeline"}],a=[{id:"metrics",label:"Métricas",icon:"analytics",content:e.jsxs(e.Fragment,{children:[e.jsx(N,{tabs:o,activeTabId:m,onTabChange:f}),e.jsxs("div",{className:"mt-6",children:[m==="dashboard"&&e.jsx(M,{onStudentSelect:t=>p({id:"metrics-selection",createdTime:"",[j]:t.legajo,[u]:t.nombre})}),m==="timeline"&&e.jsx(D,{})]})]})},...l.length>0?[{id:"manager-jefe",label:"Gestión PPS",icon:"tune",content:e.jsx(v,{forcedOrientations:l})}]:[],{id:"search",label:"Buscar Alumno",icon:"person_search",content:e.jsx("div",{className:"p-4",children:e.jsx(E,{onStudentSelect:p})})}],i=r.map(t=>({id:t.id,label:t.nombre,icon:"school",content:e.jsx(A,{legajo:t.legajo,children:e.jsx(C,{user:t,showExportButton:!0},t.legajo)}),isClosable:!0}));return[...a,...i]},[r,l,p,m]);return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsx(_,{name:(s==null?void 0:s.nombre)||"Jefe de Cátedra"}),e.jsx(I,{tabs:h,activeTabId:b,onTabChange:c,onTabClose:g}),e.jsx(P,{})]})};export{Z as default};
