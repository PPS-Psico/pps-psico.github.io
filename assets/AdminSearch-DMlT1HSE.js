import{r as s,G as r,I as a,J as C,j as t}from"./index-ZXlslG1z.js";const D=[{id:"recTest1",createdTime:"",[a]:"T0001",[r]:"Tester Alfa"},{id:"recTest2",createdTime:"",[a]:"T0002",[r]:"Beta Tester"},{id:"recTest3",createdTime:"",[a]:"T0003",[r]:"Gama Tester"}],I=({onStudentSelect:j,onSearchChange:l,isTestingMode:c=!1})=>{const[o,x]=s.useState(""),[m,n]=s.useState([]),[k,i]=s.useState(!1),[h,d]=s.useState(!1),u=s.useRef(null),p=s.useCallback(async e=>{if(l){await l(e);return}if(e.length<2){n([]);return}if(i(!0),c){setTimeout(()=>{const T=e.toLowerCase(),y=D.filter(g=>{var w,v;return((w=g[r])==null?void 0:w.toLowerCase().includes(T))||((v=g[a])==null?void 0:v.toLowerCase().includes(T))});n(y),i(!1)},300);return}const{records:f,error:S}=await C.estudiantes.getPage(1,20,{searchTerm:e,searchFields:[r,a]});S||n(f),i(!1)},[l,c]);s.useEffect(()=>{const e=setTimeout(()=>{p(o)},300);return()=>{clearTimeout(e)}},[o,p]),s.useEffect(()=>{const e=f=>{u.current&&!u.current.contains(f.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const N=e=>{j(e),x(""),n([]),d(!1)},E=e=>{x(e.target.value),h||d(!0)},b=h&&o.length>0&&!l,L=c?"Buscar (ej: Tester Alfa, T0001)":"Buscar por Legajo o Nombre...";return t.jsxs("div",{ref:u,className:`relative w-full h-full ${b?"z-[100]":"z-auto"}`,children:[t.jsxs("div",{className:"relative group h-full",children:[t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 transition-colors duration-300 text-slate-400 group-focus-within:text-blue-500 dark:group-focus-within:text-blue-400",children:t.jsx("span",{className:"material-icons !text-lg",children:"search"})}),t.jsx("input",{type:"text",value:o,onChange:E,onFocus:()=>d(!0),placeholder:L,className:"w-full h-full pl-10 pr-4 text-sm font-medium bg-transparent border-none outline-none text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:ring-0",autoComplete:"off"})]}),b&&t.jsx("div",{className:"absolute top-full left-0 z-[100] mt-2 w-full bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200/80 dark:border-slate-700 overflow-hidden max-h-80 overflow-y-auto animate-fade-in-up",style:{animationDuration:"200ms"},children:k?t.jsxs("div",{className:"p-4 flex items-center justify-center text-slate-500 dark:text-slate-400 text-sm",children:[t.jsx("div",{className:"border-2 border-slate-200 dark:border-slate-600 border-t-blue-500 rounded-full w-4 h-4 animate-spin mr-2"}),"Buscando..."]}):m.length>0?t.jsx("ul",{children:m.map(e=>t.jsx("li",{children:t.jsxs("button",{onClick:()=>N(e),className:"w-full text-left px-4 py-3 hover:bg-blue-50 dark:hover:bg-blue-900/40 transition-colors flex justify-between items-center group",children:[t.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-100 text-sm group-hover:text-blue-700 dark:group-hover:text-blue-200",children:e[r]}),t.jsx("span",{className:"text-xs font-mono text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-700/50 px-2 py-0.5 rounded border border-slate-200 dark:border-slate-700/50 group-hover:border-blue-200 dark:group-hover:border-blue-800",children:e[a]})]})},e.id))}):t.jsx("div",{className:"p-4 text-center text-sm text-slate-500 dark:text-slate-400 italic",children:"No se encontraron resultados."})})]})};export{I as A};
