import{b as x,r as n,I as j,G as u,j as e,S as v}from"./index-ZXlslG1z.js";import{A}from"./AdminSearch-DMlT1HSE.js";import{C as E}from"./ConvocatoriaManager-DsSUfls_.js";import I from"./StudentDashboard-_sgKRHhD.js";import{T as C}from"./Tabs-3YiwyxBG.js";import{M as D,T as M}from"./TimelineView-323S62Er.js";import{S as N}from"./SubTabs-B9w5BDf5.js";import{W as _}from"./WelcomeBannerAdmin-Ds9CiK7J.js";import{A as P}from"./AppModals-D8FkQV9k.js";import"./CollapsibleSection-DXbQB952.js";import"./types-Cg8ilULs.js";import"./Select-DhRNnplj.js";import"./PreSolicitudCheckModal-J-N_Aj9Q.js";import"./ProfileView-CEvSVS12.js";import"./ConvocatoriaCardPremium-Cd-vXGWP.js";import"./proxy-BFxRqQFC.js";import"./differenceInDays-B0Mox2cD.js";import"./UnifiedTabs-xSvmzb6C.js";import"./types-CzNk-woI.js";const Z=()=>{const{authenticatedUser:i}=x(),[r,T]=n.useState([]),l=(i==null?void 0:i.orientaciones)||[],b="metrics",[d,c]=n.useState(b),[m,g]=n.useState("dashboard"),p=n.useCallback(a=>{if(!a)return;const o=a[j],s=a[u];if(!o||!s){alert("El registro del estudiante no tiene legajo o nombre completo.");return}if(r.some(S=>S.legajo===String(o))){c(String(o));return}const t={id:String(o),legajo:String(o),nombre:String(s)};T(S=>[...S,t]),c(String(o))},[r]),f=n.useCallback(a=>{T(o=>o.filter(s=>s.id!==a)),d===a&&c(b)},[d,b]),h=n.useMemo(()=>{const a=[{id:"dashboard",label:"Dashboard",icon:"bar_chart"},{id:"timeline",label:"Línea de Tiempo",icon:"timeline"}],o=[{id:"metrics",label:"Métricas",icon:"analytics",content:e.jsxs(e.Fragment,{children:[e.jsx(N,{tabs:a,activeTabId:m,onTabChange:g}),e.jsxs("div",{className:"mt-6",children:[m==="dashboard"&&e.jsx(D,{onStudentSelect:t=>p({id:"metrics-selection",createdTime:"",[j]:t.legajo,[u]:t.nombre})}),m==="timeline"&&e.jsx(M,{})]})]})},...l.length>0?[{id:"manager-jefe",label:"Gestión PPS",icon:"tune",content:e.jsx(E,{forcedOrientations:l})}]:[],{id:"search",label:"Buscar Alumno",icon:"person_search",content:e.jsx("div",{className:"p-4",children:e.jsx(A,{onStudentSelect:p})})}],s=r.map(t=>({id:t.id,label:t.nombre,icon:"school",content:e.jsx(v,{legajo:t.legajo,children:e.jsx(I,{user:t,showExportButton:!0},t.legajo)}),isClosable:!0}));return[...o,...s]},[r,l,p,m]);return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsx(_,{name:(i==null?void 0:i.nombre)||"Directivo"}),e.jsx(C,{tabs:h,activeTabId:d,onTabChange:c,onTabClose:f}),e.jsx(P,{})]})};export{Z as default};
