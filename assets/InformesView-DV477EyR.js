import{r as d,p as k,j as e,M as j,R as y,N as w,c as N,P as C}from"./index-ZXlslG1z.js";const v=({task:a,onConfirmar:s})=>{const[l,c]=d.useState(!1),{nota:t,informeSubido:m}=a,n=d.useMemo(()=>t&&t!=="Sin calificar"&&t!=="Entregado (sin corregir)"&&t!=="No Entregado"?{key:"calificado",icon:"task_alt",iconContainerClass:"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300"}:m?{key:"en_correccion",icon:"hourglass_top",iconContainerClass:"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-700 dark:text-emerald-300"}:{key:"pendiente",icon:"upload",iconContainerClass:"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300 animate-[subtle-bob_1.5s_ease-in-out_infinite] group-hover:scale-110"},[t,m]),{deadlineLabel:x,deadline:f}=d.useMemo(()=>{const r=n.key==="en_correccion"&&a.fechaEntregaInforme,i=r?a.fechaEntregaInforme:a.fechaFinalizacion,b=r?"Límite de Corrección":"Fecha Estimada de Entrega",u=k(i);if(!u)return{deadlineLabel:b,deadline:null};const o=new Date(u.getTime());return o.setUTCDate(o.getUTCDate()+30),{deadlineLabel:b,deadline:o}},[a.fechaFinalizacion,a.fechaEntregaInforme,n.key]),g=async r=>{r.preventDefault(),r.stopPropagation(),c(!0);try{await s(a)}finally{c(!1)}},h=()=>f?n.key==="calificado"?null:e.jsxs("p",{className:"text-sm font-semibold mt-2 text-slate-500 dark:text-slate-400 tracking-tight",children:[x,":"," ",e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:j(f.toISOString())})]}):e.jsx("p",{className:"text-sm font-bold mt-1.5 text-slate-400 dark:text-slate-500 italic",children:"Fecha límite no disponible"}),p=()=>{const r="w-full inline-flex items-center justify-center gap-2 font-bold text-sm py-2.5 px-5 rounded-lg transition-all duration-300 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 focus:ring-opacity-50 transform hover:-translate-y-0.5",i="w-full inline-flex items-center justify-center gap-2 font-bold text-sm py-2.5 px-5 rounded-full border";switch(n.key){case"calificado":return e.jsxs("div",{className:`${i} bg-blue-50 text-blue-800 border-blue-200 dark:bg-blue-900/50 dark:text-blue-200 dark:border-blue-700/50`,"aria-label":`Nota final ${t}`,children:[e.jsx("span",{className:"material-icons !text-base",children:"grading"}),e.jsxs("span",{children:["Nota: ",t]})]});case"en_correccion":return e.jsxs("div",{className:`${i} bg-emerald-50 text-emerald-800 border-emerald-200 dark:bg-emerald-900/50 dark:text-emerald-200 dark:border-emerald-700/50`,"aria-label":"Informe entregado, en corrección",children:[e.jsx("span",{className:"material-icons !text-base",children:"schedule"}),e.jsx("span",{children:"Entregado"})]});case"pendiente":return e.jsxs("button",{onClick:g,disabled:l,className:`${r} bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed`,"aria-label":"Confirmar entrega del informe",children:[l?e.jsx("div",{className:"border-2 border-slate-400/50 dark:border-slate-500/50 border-t-slate-500 dark:border-t-slate-400 rounded-full w-4 h-4 animate-spin"}):e.jsx("span",{className:"material-icons !text-base",children:"task_alt"}),e.jsx("span",{children:"Confirmar Entrega"})]});default:return null}};return e.jsx("a",{href:a.informeLink,target:"_blank",rel:"noopener noreferrer",className:"group block bg-white dark:bg-gray-900 p-5 rounded-2xl shadow-lg shadow-slate-200/40 dark:shadow-black/40 border border-slate-200 dark:border-slate-800 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 hover:bg-gradient-to-br from-white to-slate-50/50 dark:hover:bg-gradient-to-br dark:from-gray-900 dark:to-slate-900 animate-fade-in",style:{willChange:"transform, box-shadow"},"aria-labelledby":`task-${a.convocatoriaId}`,children:e.jsxs("article",{className:"flex items-center gap-5",children:[e.jsx("div",{className:`flex-shrink-0 size-12 rounded-xl flex items-center justify-center ${n.iconContainerClass} transition-all duration-300`,children:e.jsx("span",{className:"material-icons !text-2xl",children:n.icon})}),e.jsxs("div",{className:"flex-grow flex flex-col sm:flex-row justify-between sm:items-center min-w-0 gap-4",children:[e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("h3",{id:`task-${a.convocatoriaId}`,className:"text-slate-900 dark:text-slate-50 font-extrabold text-lg leading-tight tracking-tight flex items-center",children:[a.ppsName,e.jsx("span",{className:"material-icons !text-base text-slate-400 dark:text-slate-500 ml-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:"launch"})]}),e.jsx(h,{})]}),e.jsx("div",{className:"flex-shrink-0 self-start sm:self-center w-full sm:w-52",children:e.jsx(p,{})})]})]})})},I=({tasks:a,onConfirmar:s})=>a.length===0?e.jsx(w,{icon:"task_alt",title:"Sin informes pendientes",message:"No tienes informes para subir o que estén en corrección en este momento."}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.map(l=>e.jsx(v,{task:l,onConfirmar:s},l.convocatoriaId))}),E=y.memo(I),S=()=>{const{informeTasks:a,confirmInforme:s}=N();return e.jsx(C,{icon:"assignment_turned_in",title:e.jsxs("span",{children:["Entrega de"," ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400",children:"Informes"})]}),description:"Sube tu informe final al campus y luego confirma la entrega aqui.",children:e.jsx(E,{tasks:a,onConfirmar:s.mutate})})};export{S as default};
