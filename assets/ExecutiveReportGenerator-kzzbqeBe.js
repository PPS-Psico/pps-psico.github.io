import{O as ls,M as Ie,T as K,bb as cs,bj as ds,U as us,a2 as ms,X as ps,bw as fs,W as hs,p as yt,h as vt,a3 as xs,bx as ke,aB as gs,bz as bs,a0 as Es,by as Ts,aC as As,an as It,F as kt,bv as Ns,a6 as _s,L as Ss,G as ys,E as vs,I as Is,H as ks,z as Ls,K as ws,j as t,n as Lt,r as wt,aP as Cs,N as Os}from"./index-ZXlslG1z.js";const Ct=s=>s?s.split(/ [-–] /)[0].trim():"Sin Nombre",Ye=s=>s==null?"":String(s).replace(/[\[\]"]/g,"").trim(),Rs=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Ds=(s,n,r)=>{const l=new Map(r.map(i=>[i.id,i]));return n.filter(i=>{const o=i.created_at;return o?new Date(o).getFullYear()===s:!1}).map(i=>{const o=ke(i[Ss]),u=o?l.get(o):null,b=(u==null?void 0:u[ys])||Ye(i[vs])||"Desconocido",x=(u==null?void 0:u[Is])||Ye(i[ks])||"---",E=Ye(i[Ls])||"Institución desconocida",I=i[ws]||"Pendiente";return{id:String(i.id),studentName:String(b),studentLegajo:String(x),institutionName:String(E),requestDate:Ie(i.created_at),status:String(I)}})},Ot=(s,n)=>{const r=s.lanzamientos.filter(m=>{const f=yt(m[vt]);return f&&f.getUTCFullYear()===n}),l=new Set(r.map(m=>m.id)),i=new Set;s.convocatorias.forEach(m=>{const f=m[xs],T=Array.isArray(f)?f[0]:f;if(T&&l.has(T)){const j=ke(m[gs]);j&&i.add(j)}});const o=s.estudiantes.filter(m=>m[bs]==="Finalizado"?!1:i.has(m.id)),u=s.finalizaciones.filter(m=>{const f=m[Es]||m.created_at;if(!f)return!1;const T=new Date(f);return!isNaN(T.getTime())&&T.getFullYear()===n}).map(m=>{const f=ke(m[Ts]);return s.estudiantes.find(j=>j.id===f)||{nombre:"Estudiante Finalizado",legajo:"---"}}),b=new Set;s.practicas.forEach(m=>{const f=ke(m[As]);f&&b.add(f)});const x=o.filter(m=>!b.has(m.id)),E=r.reduce((m,f)=>m+(Number(f[It])||0),0),I=new Set,D=[],M={};r.forEach(m=>{const f=m[kt];if(f){const T=Ct(f),j=yt(m[vt]),h=j?j.getUTCMonth():-1,ee=Number(m[It]||0);if(h>=0){I.add(`${T}::${h}`),M[h]||(M[h]={cuposTotal:0,institutions:new Map}),M[h].cuposTotal+=ee;const H=M[h].institutions.get(T)||{cupos:0,variants:[]};H.cupos+=ee,H.variants.push(f),M[h].institutions.set(T,H)}D.find(H=>H.nombre===T)||D.push({nombre:T,legajo:"Varias Comisiones",cupos:0})}});const V=I.size,X=Rs.map((m,f)=>{const T=M[f];return T?{monthName:m,ppsCount:T.institutions.size,cuposTotal:T.cuposTotal,institutions:Array.from(T.institutions.entries()).map(([j,h])=>({name:j,cupos:h.cupos,variants:h.variants.sort()})).sort((j,h)=>j.name.localeCompare(h.name))}:null}).filter(m=>m!==null),le=new Set;r.forEach(m=>{const f=Ct(m[kt]);le.add(f)});const we=le.size,Ce=Array.from(le).map(m=>({nombre:m,legajo:"Activa",cupos:"N/A"})),ce=s.instituciones.filter(m=>String(m[Ns])===String(n)).map(m=>({nombre:m[_s]})),J=Ds(n,s.solicitudes,s.estudiantes),q=new Date().getUTCMonth(),Q=[];return M[q]&&M[q].institutions.forEach((m,f)=>{Q.push({groupName:f,totalCupos:m.cupos,variants:m.variants.map(T=>({name:T,cupos:"N/A"}))})}),{alumnosActivos:{value:o.length,list:o},alumnosFinalizados:{value:u.length,list:u},alumnosSinNingunaPPS:{value:x.length,list:x},ppsLanzadas:{value:V,list:D},cuposOfrecidos:{value:E,list:[]},alumnosEnPPS:{value:o.length-x.length,list:[]},alumnosConPpsEsteAno:{value:o.length-x.length,list:[]},alumnosActivosSinPpsEsteAno:{value:x.length,list:x},alumnosProximosAFinalizar:{value:0,list:[]},alumnosParaAcreditar:{value:0,list:[]},nuevosConvenios:{value:ce.length,list:ce},activeInstitutions:{value:we,list:Ce},cuposTotalesConRelevamiento:{value:0,list:[]},lanzamientosMesActual:Q,rawStudents:o,launchesByMonth:X,newAgreementsList:ce.map(m=>m.nombre),ppsRequests:J}},js=async()=>{const[s,n,r,l,i,o,u]=await Promise.all([K.from(cs).select("*"),K.from(ds).select("*"),K.from(us).select("*"),K.from(ms).select("*"),K.from(ps).select("*"),K.from(fs).select("*"),K.from(hs).select("*")]);return{estudiantes:s.data||[],practicas:n.data||[],lanzamientos:r.data||[],convocatorias:l.data||[],finalizaciones:i.data||[],instituciones:o.data||[],solicitudes:u.data||[]}},Ms=({reportType:s,enabled:n=!1,isTestingMode:r=!1})=>ls({queryKey:["executiveReportData",s,r],queryFn:async()=>{if(r)return{};if(!s)throw new Error("A report type must be selected.");const l=await js(),i=o=>{const u=Ot(l,o),b=Ot(l,o-1),x=new Date(Date.UTC(o,0,1)),E=new Date(Date.UTC(o+1,0,1));E.setUTCDate(E.getUTCDate()-1);const I=new Date(Date.UTC(o,0,1));I.setUTCDate(I.getUTCDate()-1);const D=l.estudiantes.filter(M=>new Date(M.created_at).getFullYear()===o).length;return{reportType:"singleYear",year:o,period:{current:{start:Ie(x.toISOString()),end:Ie(E.toISOString())},previous:{start:"",end:Ie(I.toISOString())}},summary:`Balance del ciclo ${o}.`,kpis:{activeStudents:{current:u.alumnosActivos.value,previous:b.alumnosActivos.value},studentsWithoutAnyPps:{current:u.alumnosSinNingunaPPS.value,previous:b.alumnosSinNingunaPPS.value},newStudents:{current:D,previous:0},finishedStudents:{current:u.alumnosFinalizados.value,previous:b.alumnosFinalizados.value},newPpsLaunches:{current:u.ppsLanzadas.value,previous:b.ppsLanzadas.value},totalOfferedSpots:{current:u.cuposOfrecidos.value,previous:b.cuposOfrecidos.value},newAgreements:{current:u.nuevosConvenios.value,previous:b.nuevosConvenios.value}},launchesByMonth:u.launchesByMonth,newAgreementsList:u.newAgreementsList,ppsRequests:u.ppsRequests}};if(s==="2024"||s==="2025")return i(parseInt(s,10));if(s==="comparative"){const o=i(2024),u=i(2025);return{reportType:"comparative",summary:"Comparación de métricas clave entre los ciclos 2024 y 2025.",kpis:{activeStudents:{year2024:o.kpis.activeStudents.current,year2025:u.kpis.activeStudents.current},studentsWithoutAnyPps:{year2024:o.kpis.studentsWithoutAnyPps.current,year2025:u.kpis.studentsWithoutAnyPps.current},finishedStudents:{year2024:o.kpis.finishedStudents.current,year2025:u.kpis.finishedStudents.current},newStudents:{year2024:o.kpis.newStudents.current,year2025:u.kpis.newStudents.current},newPpsLaunches:{year2024:o.kpis.newPpsLaunches.current,year2025:u.kpis.newPpsLaunches.current},totalOfferedSpots:{year2024:o.kpis.totalOfferedSpots.current,year2025:u.kpis.totalOfferedSpots.current},newAgreements:{year2024:o.kpis.newAgreements.current,year2025:u.kpis.newAgreements.current}},launchesByMonth:{year2024:o.launchesByMonth,year2025:u.launchesByMonth},newAgreements:{year2024:o.newAgreementsList,year2025:u.newAgreementsList},ppsRequests:{year2024:o.ppsRequests,year2025:u.ppsRequests}}}throw new Error(`Invalid report type: ${s}`)},enabled:n});/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Wt,setPrototypeOf:Rt,isFrozen:Ps,getPrototypeOf:Fs,getOwnPropertyDescriptor:Us}=Object;let{freeze:C,seal:P,create:Je}=Object,{apply:Qe,construct:et}=typeof Reflect<"u"&&Reflect;C||(C=function(n){return n});P||(P=function(n){return n});Qe||(Qe=function(n,r){for(var l=arguments.length,i=new Array(l>2?l-2:0),o=2;o<l;o++)i[o-2]=arguments[o];return n.apply(r,i)});et||(et=function(n){for(var r=arguments.length,l=new Array(r>1?r-1:0),i=1;i<r;i++)l[i-1]=arguments[i];return new n(...l)});const ye=O(Array.prototype.forEach),zs=O(Array.prototype.lastIndexOf),Dt=O(Array.prototype.pop),pe=O(Array.prototype.push),Bs=O(Array.prototype.splice),Le=O(String.prototype.toLowerCase),qe=O(String.prototype.toString),Ve=O(String.prototype.match),fe=O(String.prototype.replace),Hs=O(String.prototype.indexOf),Gs=O(String.prototype.trim),F=O(Object.prototype.hasOwnProperty),w=O(RegExp.prototype.test),he=Ws(TypeError);function O(s){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var r=arguments.length,l=new Array(r>1?r-1:0),i=1;i<r;i++)l[i-1]=arguments[i];return Qe(s,n,l)}}function Ws(s){return function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return et(s,r)}}function p(s,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Le;Rt&&Rt(s,null);let l=n.length;for(;l--;){let i=n[l];if(typeof i=="string"){const o=r(i);o!==i&&(Ps(n)||(n[l]=o),i=o)}s[i]=!0}return s}function Ys(s){for(let n=0;n<s.length;n++)F(s,n)||(s[n]=null);return s}function B(s){const n=Je(null);for(const[r,l]of Wt(s))F(s,r)&&(Array.isArray(l)?n[r]=Ys(l):l&&typeof l=="object"&&l.constructor===Object?n[r]=B(l):n[r]=l);return n}function xe(s,n){for(;s!==null;){const l=Us(s,n);if(l){if(l.get)return O(l.get);if(typeof l.value=="function")return O(l.value)}s=Fs(s)}function r(){return null}return r}const jt=C(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xe=C(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$e=C(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qs=C(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ze=C(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Vs=C(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Mt=C(["#text"]),Pt=C(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ke=C(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ft=C(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ve=C(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Xs=P(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$s=P(/<%[\w\W]*|[\w\W]*%>/gm),Zs=P(/\$\{[\w\W]*/gm),Ks=P(/^data-[\-\w.\u00B7-\uFFFF]+$/),Js=P(/^aria-[\-\w]+$/),Yt=P(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qs=P(/^(?:\w+script|data):/i),ea=P(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qt=P(/^html$/i),ta=P(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ut=Object.freeze({__proto__:null,ARIA_ATTR:Js,ATTR_WHITESPACE:ea,CUSTOM_ELEMENT:ta,DATA_ATTR:Ks,DOCTYPE_NAME:qt,ERB_EXPR:$s,IS_ALLOWED_URI:Yt,IS_SCRIPT_OR_DATA:Qs,MUSTACHE_EXPR:Xs,TMPLIT_EXPR:Zs});const ge={element:1,text:3,progressingInstruction:7,comment:8,document:9},sa=function(){return typeof window>"u"?null:window},aa=function(n,r){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let l=null;const i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(l=r.getAttribute(i));const o="dompurify"+(l?"#"+l:"");try{return n.createPolicy(o,{createHTML(u){return u},createScriptURL(u){return u}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},zt=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Vt(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sa();const n=d=>Vt(d);if(n.version="3.3.1",n.removed=[],!s||!s.document||s.document.nodeType!==ge.document||!s.Element)return n.isSupported=!1,n;let{document:r}=s;const l=r,i=l.currentScript,{DocumentFragment:o,HTMLTemplateElement:u,Node:b,Element:x,NodeFilter:E,NamedNodeMap:I=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:D,DOMParser:M,trustedTypes:V}=s,X=x.prototype,le=xe(X,"cloneNode"),we=xe(X,"remove"),Ce=xe(X,"nextSibling"),ce=xe(X,"childNodes"),J=xe(X,"parentNode");if(typeof u=="function"){const d=r.createElement("template");d.content&&d.content.ownerDocument&&(r=d.content.ownerDocument)}let k,q="";const{implementation:Q,createNodeIterator:m,createDocumentFragment:f,getElementsByTagName:T}=r,{importNode:j}=l;let h=zt();n.isSupported=typeof Wt=="function"&&typeof J=="function"&&Q&&Q.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ee,ERB_EXPR:H,TMPLIT_EXPR:Oe,DATA_ATTR:Zt,ARIA_ATTR:Kt,IS_SCRIPT_OR_DATA:Jt,ATTR_WHITESPACE:tt,CUSTOM_ELEMENT:Qt}=Ut;let{IS_ALLOWED_URI:st}=Ut,S=null;const at=p({},[...jt,...Xe,...$e,...Ze,...Mt]);let y=null;const nt=p({},[...Pt,...Ke,...Ft,...ve]);let A=Object.seal(Je(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,Re=null;const te=Object.seal(Je(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let rt=!0,De=!0,it=!1,ot=!0,se=!1,be=!0,$=!1,je=!1,Me=!1,ae=!1,Ee=!1,Te=!1,lt=!0,ct=!1;const es="user-content-";let Pe=!0,ue=!1,ne={},U=null;const Fe=p({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let dt=null;const ut=p({},["audio","video","img","source","image","track"]);let Ue=null;const mt=p({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ae="http://www.w3.org/1998/Math/MathML",Ne="http://www.w3.org/2000/svg",G="http://www.w3.org/1999/xhtml";let re=G,ze=!1,Be=null;const ts=p({},[Ae,Ne,G],qe);let _e=p({},["mi","mo","mn","ms","mtext"]),Se=p({},["annotation-xml"]);const ss=p({},["title","style","font","a","script"]);let me=null;const as=["application/xhtml+xml","text/html"],ns="text/html";let _=null,ie=null;const rs=r.createElement("form"),pt=function(e){return e instanceof RegExp||e instanceof Function},He=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ie&&ie===e)){if((!e||typeof e!="object")&&(e={}),e=B(e),me=as.indexOf(e.PARSER_MEDIA_TYPE)===-1?ns:e.PARSER_MEDIA_TYPE,_=me==="application/xhtml+xml"?qe:Le,S=F(e,"ALLOWED_TAGS")?p({},e.ALLOWED_TAGS,_):at,y=F(e,"ALLOWED_ATTR")?p({},e.ALLOWED_ATTR,_):nt,Be=F(e,"ALLOWED_NAMESPACES")?p({},e.ALLOWED_NAMESPACES,qe):ts,Ue=F(e,"ADD_URI_SAFE_ATTR")?p(B(mt),e.ADD_URI_SAFE_ATTR,_):mt,dt=F(e,"ADD_DATA_URI_TAGS")?p(B(ut),e.ADD_DATA_URI_TAGS,_):ut,U=F(e,"FORBID_CONTENTS")?p({},e.FORBID_CONTENTS,_):Fe,de=F(e,"FORBID_TAGS")?p({},e.FORBID_TAGS,_):B({}),Re=F(e,"FORBID_ATTR")?p({},e.FORBID_ATTR,_):B({}),ne=F(e,"USE_PROFILES")?e.USE_PROFILES:!1,rt=e.ALLOW_ARIA_ATTR!==!1,De=e.ALLOW_DATA_ATTR!==!1,it=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ot=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,se=e.SAFE_FOR_TEMPLATES||!1,be=e.SAFE_FOR_XML!==!1,$=e.WHOLE_DOCUMENT||!1,ae=e.RETURN_DOM||!1,Ee=e.RETURN_DOM_FRAGMENT||!1,Te=e.RETURN_TRUSTED_TYPE||!1,Me=e.FORCE_BODY||!1,lt=e.SANITIZE_DOM!==!1,ct=e.SANITIZE_NAMED_PROPS||!1,Pe=e.KEEP_CONTENT!==!1,ue=e.IN_PLACE||!1,st=e.ALLOWED_URI_REGEXP||Yt,re=e.NAMESPACE||G,_e=e.MATHML_TEXT_INTEGRATION_POINTS||_e,Se=e.HTML_INTEGRATION_POINTS||Se,A=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&pt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(A.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&pt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(A.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(A.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),se&&(De=!1),Ee&&(ae=!0),ne&&(S=p({},Mt),y=[],ne.html===!0&&(p(S,jt),p(y,Pt)),ne.svg===!0&&(p(S,Xe),p(y,Ke),p(y,ve)),ne.svgFilters===!0&&(p(S,$e),p(y,Ke),p(y,ve)),ne.mathMl===!0&&(p(S,Ze),p(y,Ft),p(y,ve))),e.ADD_TAGS&&(typeof e.ADD_TAGS=="function"?te.tagCheck=e.ADD_TAGS:(S===at&&(S=B(S)),p(S,e.ADD_TAGS,_))),e.ADD_ATTR&&(typeof e.ADD_ATTR=="function"?te.attributeCheck=e.ADD_ATTR:(y===nt&&(y=B(y)),p(y,e.ADD_ATTR,_))),e.ADD_URI_SAFE_ATTR&&p(Ue,e.ADD_URI_SAFE_ATTR,_),e.FORBID_CONTENTS&&(U===Fe&&(U=B(U)),p(U,e.FORBID_CONTENTS,_)),e.ADD_FORBID_CONTENTS&&(U===Fe&&(U=B(U)),p(U,e.ADD_FORBID_CONTENTS,_)),Pe&&(S["#text"]=!0),$&&p(S,["html","head","body"]),S.table&&(p(S,["tbody"]),delete de.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw he('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw he('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=e.TRUSTED_TYPES_POLICY,q=k.createHTML("")}else k===void 0&&(k=aa(V,i)),k!==null&&typeof q=="string"&&(q=k.createHTML(""));C&&C(e),ie=e}},ft=p({},[...Xe,...$e,...qs]),ht=p({},[...Ze,...Vs]),is=function(e){let a=J(e);(!a||!a.tagName)&&(a={namespaceURI:re,tagName:"template"});const c=Le(e.tagName),g=Le(a.tagName);return Be[e.namespaceURI]?e.namespaceURI===Ne?a.namespaceURI===G?c==="svg":a.namespaceURI===Ae?c==="svg"&&(g==="annotation-xml"||_e[g]):!!ft[c]:e.namespaceURI===Ae?a.namespaceURI===G?c==="math":a.namespaceURI===Ne?c==="math"&&Se[g]:!!ht[c]:e.namespaceURI===G?a.namespaceURI===Ne&&!Se[g]||a.namespaceURI===Ae&&!_e[g]?!1:!ht[c]&&(ss[c]||!ft[c]):!!(me==="application/xhtml+xml"&&Be[e.namespaceURI]):!1},z=function(e){pe(n.removed,{element:e});try{J(e).removeChild(e)}catch{we(e)}},Z=function(e,a){try{pe(n.removed,{attribute:a.getAttributeNode(e),from:a})}catch{pe(n.removed,{attribute:null,from:a})}if(a.removeAttribute(e),e==="is")if(ae||Ee)try{z(a)}catch{}else try{a.setAttribute(e,"")}catch{}},xt=function(e){let a=null,c=null;if(Me)e="<remove></remove>"+e;else{const N=Ve(e,/^[\r\n\t ]+/);c=N&&N[0]}me==="application/xhtml+xml"&&re===G&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const g=k?k.createHTML(e):e;if(re===G)try{a=new M().parseFromString(g,me)}catch{}if(!a||!a.documentElement){a=Q.createDocument(re,"template",null);try{a.documentElement.innerHTML=ze?q:g}catch{}}const L=a.body||a.documentElement;return e&&c&&L.insertBefore(r.createTextNode(c),L.childNodes[0]||null),re===G?T.call(a,$?"html":"body")[0]:$?a.documentElement:L},gt=function(e){return m.call(e.ownerDocument||e,e,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},Ge=function(e){return e instanceof D&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof I)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},bt=function(e){return typeof b=="function"&&e instanceof b};function W(d,e,a){ye(d,c=>{c.call(n,e,a,ie)})}const Et=function(e){let a=null;if(W(h.beforeSanitizeElements,e,null),Ge(e))return z(e),!0;const c=_(e.nodeName);if(W(h.uponSanitizeElement,e,{tagName:c,allowedTags:S}),be&&e.hasChildNodes()&&!bt(e.firstElementChild)&&w(/<[/\w!]/g,e.innerHTML)&&w(/<[/\w!]/g,e.textContent)||e.nodeType===ge.progressingInstruction||be&&e.nodeType===ge.comment&&w(/<[/\w]/g,e.data))return z(e),!0;if(!(te.tagCheck instanceof Function&&te.tagCheck(c))&&(!S[c]||de[c])){if(!de[c]&&At(c)&&(A.tagNameCheck instanceof RegExp&&w(A.tagNameCheck,c)||A.tagNameCheck instanceof Function&&A.tagNameCheck(c)))return!1;if(Pe&&!U[c]){const g=J(e)||e.parentNode,L=ce(e)||e.childNodes;if(L&&g){const N=L.length;for(let R=N-1;R>=0;--R){const Y=le(L[R],!0);Y.__removalCount=(e.__removalCount||0)+1,g.insertBefore(Y,Ce(e))}}}return z(e),!0}return e instanceof x&&!is(e)||(c==="noscript"||c==="noembed"||c==="noframes")&&w(/<\/no(script|embed|frames)/i,e.innerHTML)?(z(e),!0):(se&&e.nodeType===ge.text&&(a=e.textContent,ye([ee,H,Oe],g=>{a=fe(a,g," ")}),e.textContent!==a&&(pe(n.removed,{element:e.cloneNode()}),e.textContent=a)),W(h.afterSanitizeElements,e,null),!1)},Tt=function(e,a,c){if(lt&&(a==="id"||a==="name")&&(c in r||c in rs))return!1;if(!(De&&!Re[a]&&w(Zt,a))){if(!(rt&&w(Kt,a))){if(!(te.attributeCheck instanceof Function&&te.attributeCheck(a,e))){if(!y[a]||Re[a]){if(!(At(e)&&(A.tagNameCheck instanceof RegExp&&w(A.tagNameCheck,e)||A.tagNameCheck instanceof Function&&A.tagNameCheck(e))&&(A.attributeNameCheck instanceof RegExp&&w(A.attributeNameCheck,a)||A.attributeNameCheck instanceof Function&&A.attributeNameCheck(a,e))||a==="is"&&A.allowCustomizedBuiltInElements&&(A.tagNameCheck instanceof RegExp&&w(A.tagNameCheck,c)||A.tagNameCheck instanceof Function&&A.tagNameCheck(c))))return!1}else if(!Ue[a]){if(!w(st,fe(c,tt,""))){if(!((a==="src"||a==="xlink:href"||a==="href")&&e!=="script"&&Hs(c,"data:")===0&&dt[e])){if(!(it&&!w(Jt,fe(c,tt,"")))){if(c)return!1}}}}}}}return!0},At=function(e){return e!=="annotation-xml"&&Ve(e,Qt)},Nt=function(e){W(h.beforeSanitizeAttributes,e,null);const{attributes:a}=e;if(!a||Ge(e))return;const c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:y,forceKeepAttr:void 0};let g=a.length;for(;g--;){const L=a[g],{name:N,namespaceURI:R,value:Y}=L,oe=_(N),We=Y;let v=N==="value"?We:Gs(We);if(c.attrName=oe,c.attrValue=v,c.keepAttr=!0,c.forceKeepAttr=void 0,W(h.uponSanitizeAttribute,e,c),v=c.attrValue,ct&&(oe==="id"||oe==="name")&&(Z(N,e),v=es+v),be&&w(/((--!?|])>)|<\/(style|title|textarea)/i,v)){Z(N,e);continue}if(oe==="attributename"&&Ve(v,"href")){Z(N,e);continue}if(c.forceKeepAttr)continue;if(!c.keepAttr){Z(N,e);continue}if(!ot&&w(/\/>/i,v)){Z(N,e);continue}se&&ye([ee,H,Oe],St=>{v=fe(v,St," ")});const _t=_(e.nodeName);if(!Tt(_t,oe,v)){Z(N,e);continue}if(k&&typeof V=="object"&&typeof V.getAttributeType=="function"&&!R)switch(V.getAttributeType(_t,oe)){case"TrustedHTML":{v=k.createHTML(v);break}case"TrustedScriptURL":{v=k.createScriptURL(v);break}}if(v!==We)try{R?e.setAttributeNS(R,N,v):e.setAttribute(N,v),Ge(e)?z(e):Dt(n.removed)}catch{Z(N,e)}}W(h.afterSanitizeAttributes,e,null)},os=function d(e){let a=null;const c=gt(e);for(W(h.beforeSanitizeShadowDOM,e,null);a=c.nextNode();)W(h.uponSanitizeShadowNode,a,null),Et(a),Nt(a),a.content instanceof o&&d(a.content);W(h.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(d){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=null,c=null,g=null,L=null;if(ze=!d,ze&&(d="<!-->"),typeof d!="string"&&!bt(d))if(typeof d.toString=="function"){if(d=d.toString(),typeof d!="string")throw he("dirty is not a string, aborting")}else throw he("toString is not a function");if(!n.isSupported)return d;if(je||He(e),n.removed=[],typeof d=="string"&&(ue=!1),ue){if(d.nodeName){const Y=_(d.nodeName);if(!S[Y]||de[Y])throw he("root node is forbidden and cannot be sanitized in-place")}}else if(d instanceof b)a=xt("<!---->"),c=a.ownerDocument.importNode(d,!0),c.nodeType===ge.element&&c.nodeName==="BODY"||c.nodeName==="HTML"?a=c:a.appendChild(c);else{if(!ae&&!se&&!$&&d.indexOf("<")===-1)return k&&Te?k.createHTML(d):d;if(a=xt(d),!a)return ae?null:Te?q:""}a&&Me&&z(a.firstChild);const N=gt(ue?d:a);for(;g=N.nextNode();)Et(g),Nt(g),g.content instanceof o&&os(g.content);if(ue)return d;if(ae){if(Ee)for(L=f.call(a.ownerDocument);a.firstChild;)L.appendChild(a.firstChild);else L=a;return(y.shadowroot||y.shadowrootmode)&&(L=j.call(l,L,!0)),L}let R=$?a.outerHTML:a.innerHTML;return $&&S["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&w(qt,a.ownerDocument.doctype.name)&&(R="<!DOCTYPE "+a.ownerDocument.doctype.name+`>
`+R),se&&ye([ee,H,Oe],Y=>{R=fe(R,Y," ")}),k&&Te?k.createHTML(R):R},n.setConfig=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};He(d),je=!0},n.clearConfig=function(){ie=null,je=!1},n.isValidAttribute=function(d,e,a){ie||He({});const c=_(d),g=_(e);return Tt(c,g,a)},n.addHook=function(d,e){typeof e=="function"&&pe(h[d],e)},n.removeHook=function(d,e){if(e!==void 0){const a=zs(h[d],e);return a===-1?void 0:Bs(h[d],a,1)[0]}return Dt(h[d])},n.removeHooks=function(d){h[d]=[]},n.removeAllHooks=function(){h=zt()},n}var Xt=Vt();const Bt=({launchesByMonth:s,year:n})=>s.length===0?t.jsx("p",{className:"text-sm text-slate-500 italic dark:text-slate-400",children:"No hay lanzamientos registrados para este período."}):t.jsx("div",{className:"space-y-4",children:s.map(r=>t.jsxs("div",{className:"printable-section",children:[t.jsxs("h4",{className:"font-bold text-base bg-slate-100 dark:bg-slate-800 dark:text-slate-200 p-3 border border-slate-300 dark:border-slate-700 rounded-t-lg",children:[r.monthName," (",r.ppsCount," Inst. - ",r.cuposTotal," Cupos)"]}),n===2024&&r.monthName==="Agosto"&&t.jsx("div",{className:"p-2 border-x border-slate-200 dark:border-slate-700 bg-yellow-50 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 text-xs font-semibold text-center",children:"-- Ingreso del nuevo coordinador --"}),t.jsx("div",{className:"border border-t-0 border-slate-300 dark:border-slate-700 p-3 rounded-b-md",children:t.jsx("ul",{className:"space-y-1 text-xs",children:r.institutions.map(l=>t.jsxs("li",{className:"flex justify-between items-start",children:[t.jsx("span",{className:"flex-1 pr-2 text-slate-700 dark:text-slate-300",children:l.name}),t.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-100",children:l.cupos})]},l.name))})})]},r.monthName))}),Ht=({requests:s,statusLabel:n})=>s.length===0?t.jsx("p",{className:"text-xs text-slate-500 italic",children:"No hay registros."}):t.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden mb-4",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-2 text-left font-bold text-slate-700 dark:text-slate-300 w-1/3",children:"Alumno"}),t.jsx("th",{className:"p-2 text-left font-bold text-slate-700 dark:text-slate-300 w-2/3",children:"Institución Solicitada"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(r=>t.jsxs("tr",{children:[t.jsxs("td",{className:"p-2 text-slate-600 dark:text-slate-400 font-medium",children:[r.studentName,t.jsx("span",{className:"block text-[10px] text-slate-400 font-mono",children:r.studentLegajo})]}),t.jsx("td",{className:"p-2 text-slate-800 dark:text-slate-200",children:r.institutionName})]},r.id))})]})}),$t=({requests:s})=>{const n=s.filter(l=>{const i=Lt(l.status);return i==="realizada"||i==="finalizada"||i==="aprobada"}),r=s.filter(l=>{const i=Lt(l.status);return!(i==="realizada"||i==="finalizada"||i==="aprobada")&&!(i==="no se pudo concretar"||i==="rechazada"||i==="cancelada")&&i!=="archivado"});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-sm text-emerald-700 dark:text-emerald-400 mb-2 border-b border-emerald-200 pb-1 flex justify-between",children:[t.jsx("span",{children:"Solicitudes Realizadas y Concretadas"}),t.jsx("span",{className:"bg-emerald-100 px-2 rounded-full text-xs flex items-center",children:n.length})]}),t.jsx(Ht,{requests:n})]}),r.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold text-sm text-blue-700 dark:text-blue-400 mb-2 border-b border-blue-200 pb-1 flex justify-between",children:[t.jsx("span",{children:"En Gestión / Pendientes"}),t.jsx("span",{className:"bg-blue-100 px-2 rounded-full text-xs flex items-center",children:r.length})]}),t.jsx(Ht,{requests:r})]})]})},na=({data:s})=>{const n=[{label:"Estudiantes Activos",key:"activeStudents"},{label:"Estudiantes sin Ninguna PPS (Total)",key:"studentsWithoutAnyPps"},{label:"Estudiantes Nuevos (Ingresos)",key:"newStudents"},{label:"Estudiantes Finalizados (Ciclo)",key:"finishedStudents"},{label:"PPS Nuevas Lanzadas",key:"newPpsLaunches"},{label:"Cupos Totales Ofrecidos",key:"totalOfferedSpots"},{label:"Convenios Nuevos Firmados",key:"newAgreements"}],r=Xt.sanitize(s.summary);return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"mb-10 printable-section text-center",children:[t.jsx("h1",{className:"text-4xl font-black text-slate-900 dark:text-slate-50 tracking-tight",children:"Balance de Prácticas Profesionales"}),t.jsxs("p",{className:"text-xl font-semibold text-slate-700 dark:text-slate-300 mt-2",children:["Resumen Anual del Ciclo ",s.year]})]}),t.jsx("section",{className:"mb-8 printable-section p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200/60 dark:border-blue-800/60 rounded-lg text-blue-800 dark:text-blue-200",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("span",{className:"material-icons mt-1 text-blue-600 dark:text-blue-400",children:"info"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold mb-1 text-base",children:"Cómo funciona este reporte"}),t.jsxs("div",{className:"text-xs leading-relaxed",children:["Este panel compara dos momentos para mostrar la evolución durante el ciclo ",s.year,".",t.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[t.jsxs("li",{children:[t.jsxs("strong",{children:["Total Acumulado (",s.year,"):"]})," Muestra el estado actual al"," ",t.jsx("strong",{children:s.period.current.end}),"."]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Cierre Ciclo Anterior:"})," Muestra el estado al finalizar el ciclo anterior (",t.jsx("strong",{children:s.period.previous.end}),")."]}),t.jsxs("li",{children:[t.jsxs("strong",{children:["Evolución (",s.year,"):"]})," Es la diferencia neta, reflejando la actividad ocurrida exclusivamente durante el ciclo ",s.year,"."]})]})]})]})]})}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Resumen Ejecutivo"}),t.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:r}})]}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Panel de Indicadores Clave (KPIs)"}),t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left font-bold text-slate-600 dark:text-slate-300",children:"Indicador"}),t.jsxs("th",{className:"p-3 text-center font-bold text-slate-600 dark:text-slate-300",children:["Total Acumulado (",s.year,")"]}),t.jsx("th",{className:"p-3 text-center font-bold text-slate-600 dark:text-slate-300",children:"Cierre Ciclo Anterior"}),t.jsxs("th",{className:"p-3 text-center font-bold text-slate-600 dark:text-slate-300",children:["Evolución (",s.year,")"]})]})}),t.jsx("tbody",{children:n.map(l=>{const i=s.kpis[l.key],o=i.current-i.previous,u=i.previous>0?o/i.previous*100:o>0?100:0,b=l.key==="activeStudents",x=o>0,E=o<0;let I=x?"text-emerald-700 dark:text-emerald-400":E?"text-rose-700 dark:text-rose-400":"text-slate-600 dark:text-slate-400",D=x?"arrow_upward":E?"arrow_downward":"remove";return b&&o!==0&&(I="text-slate-600 dark:text-slate-400",D=x?"trending_up":"trending_down"),t.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"p-3 font-semibold text-slate-800 dark:text-slate-100",children:l.label}),t.jsx("td",{className:"p-3 text-center font-bold text-2xl text-slate-900 dark:text-slate-50",children:i.current}),t.jsx("td",{className:"p-3 text-center text-slate-600 dark:text-slate-400",children:i.previous}),t.jsx("td",{className:`p-3 text-center font-semibold ${I}`,children:o!==0?t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx("span",{className:"material-icons !text-base",children:D}),t.jsxs("span",{children:[o>0?"+":"",o," (",u.toFixed(0),"%)"]})]}):t.jsx("span",{children:"-"})})]},l.key)})})]})]}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Gestión de Solicitudes de PPS"}),t.jsx($t,{requests:s.ppsRequests})]})]})},ra=({data:s})=>{const n=[{label:"Estudiantes Activos",key:"activeStudents"},{label:"Estudiantes Finalizados (Ciclo)",key:"finishedStudents"},{label:"PPS Nuevas Lanzadas",key:"newPpsLaunches"},{label:"Cupos Totales Ofrecidos",key:"totalOfferedSpots"},{label:"Convenios Nuevos Firmados",key:"newAgreements"}],r=Xt.sanitize(s.summary);return t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"mb-10 printable-section",children:[t.jsx("h1",{className:"text-4xl font-black text-slate-900 dark:text-slate-50 tracking-tight",children:"Reporte Comparativo de Prácticas Profesionales"}),t.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mt-2 tracking-wide",children:"Análisis Comparativo Anual: 2024 vs. 2025"})]}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Resumen Ejecutivo"}),t.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:r}})]}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Panel Comparativo de KPIs"}),t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-3 text-left font-bold text-slate-600 dark:text-slate-300",children:"Indicador"}),t.jsx("th",{className:"p-3 text-center font-bold text-slate-600 dark:text-slate-300",children:"Balance 2024"}),t.jsx("th",{className:"p-3 text-center font-bold text-slate-600 dark:text-slate-300",children:"Balance 2025"}),t.jsx("th",{className:"p-3 text-center font-bold text-slate-600 dark:text-slate-300",children:"Evolución"})]})}),t.jsx("tbody",{children:n.map(l=>{const i=s.kpis[l.key],o=i.year2025-i.year2024,u=i.year2024>0?o/i.year2024*100:o>0?100:0,b=l.key==="activeStudents",x=o>0,E=o<0;let I=x?"text-emerald-700 dark:text-emerald-400":E?"text-rose-700 dark:text-rose-400":"text-slate-600 dark:text-slate-400",D=x?"arrow_upward":E?"arrow_downward":"remove";return b&&o!==0&&(I="text-slate-600 dark:text-slate-400",D=x?"trending_up":"trending_down"),t.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"p-3 font-semibold text-slate-800 dark:text-slate-100",children:l.label}),t.jsx("td",{className:"p-3 text-center font-bold text-2xl text-slate-700 dark:text-slate-300",children:i.year2024}),t.jsx("td",{className:"p-3 text-center font-bold text-2xl text-slate-900 dark:text-slate-50",children:i.year2025}),t.jsx("td",{className:`p-3 text-center font-semibold ${I}`,children:o!==0?t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[t.jsx("span",{className:"material-icons !text-base",children:D}),t.jsxs("span",{children:[o>0?"+":"",o," (",u.toFixed(0),"%)"]})]}):t.jsx("span",{children:"-"})})]},l.key)})})]})]}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Gestión de Solicitudes de PPS (Ciclo 2025)"}),t.jsx($t,{requests:s.ppsRequests.year2025})]})]})},Gt=({data:s})=>t.jsxs("div",{className:"printable-executive-report bg-white dark:bg-slate-900 p-8 font-sans",children:[t.jsx("style",{children:`
                @media print {
                  body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
                  .printable-section { break-inside: avoid; }
                }
            `}),s.reportType==="comparative"?t.jsx(ra,{data:s}):t.jsx(na,{data:s}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Nuevos Convenios"}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-extrabold text-lg text-slate-800 dark:text-slate-100 mb-3 tracking-tight",children:["2024 (",s.reportType==="comparative"?s.newAgreements.year2024.length:s.newAgreementsList.length,")"]}),s.reportType==="comparative"&&s.newAgreements.year2024.length>0?t.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-600 dark:text-slate-300",children:s.newAgreements.year2024.map((n,r)=>t.jsx("li",{children:n},r))}):s.reportType!=="comparative"&&s.newAgreementsList.length>0?t.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-600 dark:text-slate-300",children:s.newAgreementsList.map((n,r)=>t.jsx("li",{children:n},r))}):t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 italic",children:"No hay datos."})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-extrabold text-lg text-slate-800 dark:text-slate-100 mb-3 tracking-tight",children:["2025 (",s.reportType==="comparative"?s.newAgreements.year2025.length:"N/A",")"]}),s.reportType==="comparative"&&s.newAgreements.year2025.length>0?t.jsx("ul",{className:"list-disc pl-5 text-sm text-slate-600 dark:text-slate-300",children:s.newAgreements.year2025.map((n,r)=>t.jsx("li",{children:n},r))}):t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 italic",children:"No hay datos."})]})]})]}),t.jsxs("section",{className:"mb-10 printable-section",children:[t.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 dark:text-slate-100 border-b-2 border-slate-300 dark:border-slate-700 pb-3 mb-5 tracking-tight",children:"Línea de Tiempo de PPS Lanzadas"}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-extrabold text-lg text-slate-800 dark:text-slate-100 mb-3 tracking-tight",children:"2024"}),t.jsx(Bt,{year:2024,launchesByMonth:s.reportType==="comparative"?s.launchesByMonth.year2024:s.launchesByMonth})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-extrabold text-lg text-slate-800 dark:text-slate-100 mb-3 tracking-tight",children:"2025"}),t.jsx(Bt,{year:2025,launchesByMonth:s.reportType==="comparative"?s.launchesByMonth.year2025:[]})]})]})]}),t.jsx("footer",{className:"mt-12 text-center text-xs text-gray-500 dark:text-slate-400",children:t.jsxs("p",{children:["Reporte generado desde Mi Panel Académico el ",new Date().toLocaleDateString("es-ES"),"."]})})]}),oa=({isTestingMode:s=!1})=>{const[n,r]=wt.useState(null),[l,i]=wt.useState(!1),{data:o,isLoading:u,error:b}=Ms({reportType:n,enabled:l,isTestingMode:s}),x=E=>{r(E),i(!0)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"no-print p-6 bg-slate-50/70 dark:bg-slate-800/50 rounded-xl border border-slate-200/60 dark:border-slate-700 flex flex-col sm:flex-row items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-grow",children:[t.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Seleccionar Reporte"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Elige el tipo de balance que deseas generar."})]}),t.jsxs("div",{className:"w-full sm:w-auto flex flex-col sm:flex-row gap-3",children:[t.jsx("button",{onClick:()=>x("2024"),disabled:u,className:"w-full sm:w-auto bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-100 font-bold py-2.5 px-5 rounded-lg text-sm transition-colors shadow-md disabled:bg-slate-300 disabled:cursor-not-allowed flex items-center justify-center gap-2 hover:bg-slate-100 dark:hover:bg-slate-600",children:"Balance 2024"}),t.jsx("button",{onClick:()=>x("2025"),disabled:u,className:"w-full sm:w-auto bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-100 font-bold py-2.5 px-5 rounded-lg text-sm transition-colors shadow-md disabled:bg-slate-300 disabled:cursor-not-allowed flex items-center justify-center gap-2 hover:bg-slate-100 dark:hover:bg-slate-600",children:"Balance 2025"}),t.jsx("button",{onClick:()=>x("comparative"),disabled:u,className:"w-full sm:w-auto bg-blue-600 text-white font-bold py-2.5 px-5 rounded-lg text-sm transition-colors shadow-md disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 hover:bg-blue-700",children:"Comparativo 2024 vs 2025"})]})]}),u&&t.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[t.jsx(Cs,{}),t.jsx("p",{className:"mt-4 font-semibold text-slate-600 dark:text-slate-300",children:"Generando reporte, esto puede tardar un momento..."})]}),b&&t.jsx(Os,{icon:"error",title:"Error al Generar Reporte",message:b.message}),o&&!u&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"no-print flex justify-end",children:t.jsxs("button",{onClick:()=>window.print(),className:"inline-flex items-center gap-2 bg-slate-700 text-white font-bold text-sm py-2 px-4 rounded-lg hover:bg-slate-800 transition-colors",children:[t.jsx("span",{className:"material-icons !text-base",children:"print"}),"Imprimir / Guardar PDF"]})}),t.jsx("div",{className:"print-only",children:t.jsx(Gt,{data:o})}),t.jsx("div",{className:"no-print mt-4 border border-slate-200/60 rounded-xl shadow-lg p-1",children:t.jsx("div",{className:"h-[800px] overflow-auto",children:t.jsx(Gt,{data:o})})})]})]})};export{oa as default};
