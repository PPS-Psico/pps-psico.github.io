const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DatabaseEditor-Dj8Wmbgl.js","./index-ZXlslG1z.js","./index-BZxwZwPS.css","./SubTabs-B9w5BDf5.js","./UnifiedTabs-xSvmzb6C.js","./proxy-BFxRqQFC.js","./dbSchema-B3bE2DnB.js","./types-CzNk-woI.js","./ConfirmModal-DfSwa4qW.js","./types-Cg8ilULs.js","./AdminSearch-DMlT1HSE.js","./PenalizationManager-BOJuieNb.js","./EmailAutomationManager-ZAPn7CHT.js","./emailService-DD1-Dxe1.js","./Select-DhRNnplj.js","./NuevosConvenios-Bq9_tyBt.js","./ExecutiveReportGenerator-kzzbqeBe.js","./ActiveInstitutionsReport-CjXeHe2X.js","./PersonalizationPanel-CFi9g374.js","./DataIntegrityTool-Qpa8j0sl.js","./MonitoringTest-BexzaHff.js"])))=>i.map(i=>d[i]);
import{b3 as E,r as t,g as j,i as g,j as e,a5 as y,b4 as i,G as v,I as f,b5 as A,aP as I,b0 as r,J as N}from"./index-ZXlslG1z.js";import{S as T}from"./SubTabs-B9w5BDf5.js";import{A as S}from"./AdminSearch-DMlT1HSE.js";import{R as z,s as P}from"./dbSchema-B3bE2DnB.js";import"./UnifiedTabs-xSvmzb6C.js";import"./proxy-BFxRqQFC.js";const w=t.lazy(()=>r(()=>import("./DatabaseEditor-Dj8Wmbgl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),R=t.lazy(()=>r(()=>import("./PenalizationManager-BOJuieNb.js"),__vite__mapDeps([11,1,2,10,8]),import.meta.url)),D=t.lazy(()=>r(()=>import("./EmailAutomationManager-ZAPn7CHT.js"),__vite__mapDeps([12,1,2,13,14]),import.meta.url)),C=t.lazy(()=>r(()=>import("./NuevosConvenios-Bq9_tyBt.js"),__vite__mapDeps([15,1,2]),import.meta.url)),L=t.lazy(()=>r(()=>import("./ExecutiveReportGenerator-kzzbqeBe.js"),__vite__mapDeps([16,1,2]),import.meta.url)),O=t.lazy(()=>r(()=>import("./ActiveInstitutionsReport-CjXeHe2X.js"),__vite__mapDeps([17,1,2]),import.meta.url)),V=t.lazy(()=>r(()=>import("./PersonalizationPanel-CFi9g374.js"),__vite__mapDeps([18,1,2]),import.meta.url)),k=t.lazy(()=>r(()=>import("./DataIntegrityTool-Qpa8j0sl.js"),__vite__mapDeps([19,1,2]),import.meta.url)),F=t.lazy(()=>r(()=>import("./MonitoringTest-BexzaHff.js"),__vite__mapDeps([20,1,2]),import.meta.url)),M={label:"Estudiante",schema:P.estudiantes,fieldConfig:[{key:v,label:"Nombre Completo",type:"text"},{key:f,label:"Legajo",type:"text"},{key:A,label:"Notas (Opcional)",type:"textarea"}]},K=({onStudentSelect:_,isTestingMode:n=!1})=>{const{preferences:s}=E(),[o,h]=t.useState("editor-db"),[u,l]=t.useState(!1),[c,d]=t.useState(null),x=j(),p=g({mutationFn:a=>n?new Promise(m=>setTimeout(()=>m(null),500)):N.estudiantes.create(a),onSuccess:()=>{d({message:"Estudiante registrado correctamente.",type:"success"}),l(!1),x.invalidateQueries({queryKey:["databaseEditor","estudiantes"]})},onError:a=>d({message:`Error al crear: ${a.message}`,type:"error"})}),b=t.useMemo(()=>{const a=[{id:"editor-db",label:"Editor DB",icon:"storage"},{id:"search",label:"Buscar Alumno",icon:"person_search"}];return s.showNewAgreements&&a.push({id:"convenios",label:"Convenios Nuevos",icon:"handshake"}),s.showPenalizations&&a.push({id:"penalizaciones",label:"Penalizaciones",icon:"gavel"}),s.showAutomation&&a.push({id:"automation",label:"Automatizaciones",icon:"auto_fix_high"}),s.showReports&&a.push({id:"reportes",label:"Reportes",icon:"summarize"}),s.showIntegrity&&a.push({id:"integrity",label:"Integridad",icon:"health_and_safety"}),s.showMonitoring&&a.push({id:"monitoring",label:"Monitoring",icon:"monitoring"}),a.push({id:"personalization",label:"Personalización",icon:"tune"}),a},[s]);return e.jsxs("div",{className:"space-y-8",children:[c&&e.jsx(y,{message:c.message,type:c.type,onClose:()=>d(null)}),e.jsx(T,{tabs:b,activeTabId:o,onTabChange:h}),e.jsx("div",{className:"mt-6",children:e.jsxs(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(I,{})}),children:[o==="editor-db"&&e.jsx(i,{children:e.jsx(w,{isTestingMode:n})}),o==="convenios"&&s.showNewAgreements&&e.jsx(i,{children:e.jsx(C,{isTestingMode:n})}),o==="penalizaciones"&&s.showPenalizations&&e.jsx(i,{children:e.jsx(R,{isTestingMode:n})}),o==="automation"&&s.showAutomation&&e.jsx(i,{children:e.jsx(D,{})}),o==="integrity"&&s.showIntegrity&&e.jsx(i,{children:e.jsx(k,{})}),o==="monitoring"&&s.showMonitoring&&e.jsx(i,{children:e.jsx(F,{})}),o==="personalization"&&e.jsx(i,{children:e.jsx(V,{})}),o==="search"&&e.jsx(i,{children:e.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[e.jsx(S,{onStudentSelect:_,isTestingMode:n}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200 dark:border-slate-700 text-center",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"¿No encuentras al estudiante? Agrégalo manualmente solo con nombre y legajo."}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 px-6 rounded-xl shadow-md hover:shadow-lg transition-all active:scale-95",children:[e.jsx("span",{className:"material-icons !text-lg",children:"person_add"}),"Alta Rápida de Estudiante"]})]}),u&&e.jsx(z,{isOpen:u,onClose:()=>l(!1),record:null,tableConfig:M,onSave:(a,m)=>p.mutate(m),isSaving:p.isPending})]})}),o==="reportes"&&s.showReports&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(i,{children:e.jsx(O,{isTestingMode:n})}),e.jsx(i,{children:e.jsx(L,{isTestingMode:n})})]})]})})]})};export{K as default};
