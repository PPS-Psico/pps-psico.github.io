import{r as p,n as h,_ as N,b2 as j,h as E,p as I,j as e,F as f,an as b,aP as S,N as v}from"./index-ZXlslG1z.js";import{S as _}from"./SubTabs-B9w5BDf5.js";import{u as A,C}from"./ConvocatoriaManager-DsSUfls_.js";import"./UnifiedTabs-xSvmzb6C.js";import"./proxy-BFxRqQFC.js";import"./CollapsibleSection-DXbQB952.js";const g=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],D=({items:d})=>{const c=p.useMemo(()=>{const i={};for(let a=0;a<12;a++)i[a]=[];return d.forEach(a=>{const r=h(a[N]),t=a[j]||a[E];if((r==="relanzamiento confirmado"||r==="abierta")&&t){const n=new Date().getFullYear();let s=!0,o=-1,x="?";const u=t.toLowerCase();o=g.findIndex(l=>u.includes(l.toLowerCase()));const m=t.match(/\b20\d{2}\b/);if(m&&parseInt(m[0])!==n&&(s=!1),o===-1){const l=I(t);l&&(l.getUTCFullYear()!==n?s=!1:(o=l.getUTCMonth(),x=String(l.getUTCDate())))}s&&o>=0&&o<12&&(a._displayDay=x,i[o].push(a))}}),i},[d]);return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 animate-fade-in",children:g.map((i,a)=>{const r=c[a],t=r.length>0,n=new Date().getMonth()===a;return e.jsxs("div",{className:`rounded-xl border ${t?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 shadow-sm":"bg-slate-50/50 dark:bg-slate-800/30 border-slate-100 dark:border-slate-800/50 opacity-70"} ${n?"ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-slate-900":""} overflow-hidden flex flex-col h-full`,children:[e.jsxs("div",{className:`p-3 border-b ${t?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-100 dark:border-indigo-800":"border-slate-100 dark:border-slate-800"} flex justify-between items-center`,children:[e.jsxs("h3",{className:`font-bold ${t?"text-indigo-900 dark:text-indigo-200":"text-slate-500 dark:text-slate-500"}`,children:[i," ",n&&e.jsx("span",{className:"text-[10px] text-blue-500 uppercase ml-1",children:"(Actual)"})]}),t&&e.jsx("span",{className:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300 text-xs font-bold px-2 py-0.5 rounded-full",children:r.length})]}),e.jsx("div",{className:"p-3 flex-grow",children:t?e.jsx("ul",{className:"space-y-2",children:r.map(s=>e.jsxs("li",{className:"text-xs group relative pl-3 border-l-2 border-emerald-400",children:[e.jsx("div",{className:"font-semibold text-slate-700 dark:text-slate-200 truncate",title:s[f],children:s[f]}),e.jsxs("div",{className:"text-slate-500 dark:text-slate-400 flex justify-between mt-0.5",children:[e.jsx("span",{children:s._displayDay!=="?"?`Día ${s._displayDay}`:"A confirmar"}),s[b]&&e.jsxs("span",{children:[s[b]," cupos"]})]})]},s.id))}):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-300 dark:text-slate-600",children:e.jsx("span",{className:"text-xs italic",children:"Sin planificación"})})})]},i)})})},F=({isTestingMode:d=!1})=>{const[c,i]=p.useState("manager"),{filteredData:a,loadingState:r,error:t}=A({isTestingMode:d}),n=[{id:"manager",label:"Gestión de Relanzamientos",icon:"rocket_launch"},{id:"calendar",label:"Calendario 2026",icon:"calendar_month"}];return r==="loading"||r==="initial"?e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(S,{})}):t?e.jsx(v,{icon:"error",title:"Error de carga",message:t}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{tabs:n,activeTabId:c,onTabChange:i}),e.jsxs("div",{className:"mt-6 animate-fade-in-up",children:[c==="manager"&&e.jsx(C,{isTestingMode:d}),c==="calendar"&&e.jsx(D,{items:[...a.activasYPorFinalizar,...a.finalizadasParaReactivar,...a.relanzamientosConfirmados,...a.activasIndefinidas]})]})]})};export{F as default};
